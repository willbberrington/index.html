<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Global Labour Screen Tracker</title>
<style>
body {
font-family: Arial, sans-serif;
max-width: 1200px;
margin: 0 auto;
padding: 20px;
background-color: #f5f5f5;
}
h1 {
text-align: center;
color: #333;
}
.videos-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 20px;
margin-top: 30px;
}
.video-card {
background: white;
border-radius: 8px;
overflow: hidden;
box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.video-card iframe {
width: 100%;
height: 200px;
border: none;
}
.video-info {
padding: 15px;
}
.video-title {
font-size: 14px;
font-weight: bold;
margin: 0;
color: #333;
}
.loading {
text-align: center;
padding: 50px;
font-size: 18px;
color: #666;
}
.error {
background: #ffebee;
color: #c62828;
padding: 15px;
border-radius: 8px;
margin: 20px 0;
text-align: center;
}
.update-info {
background: #e3f2fd;
padding: 10px 15px;
border-radius: 8px;
margin: 20px 0;
text-align: center;
font-size: 14px;
color: #1565c0;
border-left: 4px solid #2196f3;
}
</style>
</head>
<body>
<h1>Global Labour Screen Tracker</h1>

<div id="loading" class="loading">Loading videos...</div>
<div id="error" class="error" style="display:none;"></div>
<div id="videos" class="videos-grid"></div>

<script>
//
const API_KEY = 'AIzaSyBCQeWO5lhHka-2hvUeNyG2Kojqnum8eRc';

// CACHED VIDEO IDs - These are updated automatically every Monday
// Last updated: Week 5
const CACHED_VIDEOS = [
  {
    "videoId": "8up4-f6ZSz4",
    "title": "„Äê1Êó•ÂØÜÁùÄ„Äë25Ê≠≥„ÅßÁ§æÈï∑Ë≥ûÂ∏∏ÈÄ£„ÅÆÂúßÂÄíÁöÑË®ºÂà∏Âñ∂Ê•≠„Ç®„Éº„Çπ„Å´ÂØÜÁùÄÔºÅÔºèÂ≤°‰∏âË®ºÂà∏"
  },
  {
    "videoId": "S_8-_7vs1FE",
    "title": "„Åü„Å£„Åü1Êó•„Åß‰ªï‰∫ã„ÇíËæû„ÇÅ„ÅüÁêÜÁî± #shorts"
  },
  {
    "videoId": "TUI5ILZIcqU",
    "title": "Âñ∂Ê•≠„Éû„É≥üë©üèª‚Äçüíªüåü‰ªï‰∫ã„ÅÆÊó•„ÅÆ1Êó•VLOG‚úçüèªüéÄÂúüÊó•„ÇÇ‰ªï‰∫ãüìû #‰ªï‰∫ãÂ•≥Â≠ê"
  },
  {
    "videoId": "C-85Dt7DXGA",
    "title": "„Éû„Ç§„ÇØ„É≠„ÇΩ„Éï„ÉàÁ§æÂì°„ÅÆ1Êó•„ÅÆ‰ªï‰∫ã"
  },
  {
    "videoId": "2rdjVRb_jEQ",
    "title": "‰ªï‰∫ã„Çí„Çµ„Éú„Çã„Åì„Å®„Å´Âæπ„Åó„Åü„ÇÜ„Å®„ÇäÁ§æÂì°„ÅÆÔºëÊó•„Åå„ÇÑ„Å∞„Åô„Åé„ÇãÔΩóÔΩóÔΩóÔΩóÔΩó"
  },
  {
    "videoId": "l3QBCivO10A",
    "title": "„ÄêÂ§ú‰∏≠„Åæ„Åß‰ªï‰∫ã„ÄëÂ§ñË≥áÁ≥ª„Ç≥„É≥„Çµ„É´„ÅÆ1Êó• #shorts"
  },
  {
    "videoId": "BXgjclRKkgQ",
    "title": "„Äå„ÇÄ„Åé„ÅÆÂÖàÁîü„ÅÆ‰ªï‰∫ã„ÅÆ‰∏ÄÊó•„Å´ÂØÜÁùÄ„Äç„ÄÄ#cat #„Éê„Ç§„Éà #animation #„Éû„É≥„ÉÅ„Ç´„É≥ #funny #Áå´ #cute #ÂãïÁâ© #funnycats #pets"
  },
  {
    "videoId": "zJezwEwHjU8",
    "title": "3„Å§„ÅÆ‰ªï‰∫ã„ÇíÊéõ„ÅëÊåÅ„Å°„Åô„Çã22Ê≠≥„ÅÆ1Êó•üí®‰∫∫Áîü„ÅØÂøô„Åó„ÅÑ„Åè„Çâ„ÅÑ„Åå‰∏ÅÂ∫¶ËâØ„ÅÑüë©üèª‚Äçüç≥‚ô•Ô∏è#„Éü„É´„Å®365Êó• #shorts #Êó•Â∏∏vlog #„Éë„ÉÜ„Ç£„Ç∑„Ç®"
  },
  {
    "videoId": "qm-1lN8QZNw",
    "title": "„ÄêÊòî„ÅØ‰ΩôË£ï„Å†„Å£„ÅüÔºü„Äë1Êó•8ÊôÇÈñìÂä¥ÂÉç„Åß„Åô„ÇâËÄê„Åà„Çâ„Çå„Å™„ÅÑÁêÜÁî±„Å®„ÅØÔºü #shorts"
  },
  {
    "videoId": "hrUzu1jFafE",
    "title": "ÂåªÁôÇ‰∫ãÂãô „ÅÆ 1Êó• ‰ªï‰∫ã „É´„Éº„ÉÜ„Ç£„É≥ #ÂåªÁôÇ‰∫ãÂãô #Ê±Ç‰∫∫ #Êé°Áî® #Ëª¢ËÅ∑"
  },
  {
    "videoId": "_Pol9Ve9JOM",
    "title": "Trabajos remotos sin experiencia laboral üéâ"
  },
  {
    "videoId": "FORqhYoCKZc",
    "title": "Cinco formas de usar la IA hoy en tu trabajo diario"
  }
];

// Search queries in different languages for "day in the life" worker videos
const searchQueries = [
'day in the life worker',
'a day in my life job',
'd√≠a en la vida trabajo', // Spanish (Spain)
'un d√≠a en mi vida trabajo', // Spanish variant
'd√≠a de trabajo en mi vida', // Latin American Spanish
'mi trabajo diario', // Spanish - daily work
'journ√©e dans la vie travail', // French (France)
'une journ√©e de travail', // French variant
'journ√©e de travail en Afrique', // African French
'mon travail quotidien', // French - daily work
'Tag im Leben Arbeit', // German
'‰ªï‰∫ã„ÅÆ‰∏ÄÊó•', // Japanese
'Â∑•‰Ωú‰∏≠ÁöÑ‰∏ÄÂ§©', // Chinese Simplified
'Â∑•‰Ωú‰∏≠ÁöÑ‰∏ÄÂ§©', // Chinese Traditional
'ÊàëÁöÑÂ∑•‰ΩúÊó•Â∏∏', // Chinese - my work routine
'ËÅå‰∏öÊó•Â∏∏', // Chinese - career daily life
'dia na vida trabalho', // Portuguese (Brazil)
'rotina de trabalho', // Portuguese - work routine
'–¥–µ–Ω—å –∏–∑ –∂–∏–∑–Ω–∏ —Ä–∞–±–æ—Ç–∞', // Russian
'–º–æ–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å', // Russian - my work day
'giorno nella vita lavoro', // Italian
'ÏßÅÏû•Ïù∏ ÌïòÎ£®', // Korean
'ÏùºÏÉÅ Î∏åÏù¥Î°úÍ∑∏ ÏßÅÏû•', // Korean - daily vlog work
'ŸäŸàŸÖ ŸÅŸä ÿßŸÑÿ≠Ÿäÿßÿ© ÿπŸÖŸÑ', // Arabic
'dag in het leven werk', // Dutch
'dzie≈Ñ w ≈ºyciu praca', // Polish
'‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô', // Thai
'‡§è‡§ï ‡§¶‡§ø‡§® ‡§Æ‡•á‡§∞‡•Ä ‡§®‡•å‡§ï‡§∞‡•Ä', // Hindi
'mijn dagelijks werk', // Dutch variant
'œÑŒ∑ Œ¥ŒøœÖŒªŒµŒπŒ¨ ŒºŒøœÖ', // Greek
'i≈üimde bir g√ºn', // Turkish
'pekerjaan sehari-hari', // Indonesian
'vi·ªác l√†m h√†ng ng√†y' // Vietnamese
];

// Get week number to ensure same videos throughout the week
function getWeekNumber(date) {
const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
const dayNum = d.getUTCDay() || 7;
d.setUTCDate(d.getUTCDate() + 4 - dayNum);
const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
}

// Seeded random number generator for consistent results per week
function seededRandom(seed) {
const x = Math.sin(seed++) * 10000;
return x - Math.floor(x);
}

async function searchYouTube(query, maxResults = 10) {
const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&maxResults=${maxResults}&key=${API_KEY}`;

try {
const response = await fetch(url);
if (!response.ok) {
throw new Error(`API Error: ${response.status}`);
}
const data = await response.json();
return data.items || [];
} catch (error) {
console.error('Search error:', error);
return [];
}
}

async function fetchNewVideos() {
console.log('Fetching new videos from YouTube API...');
const weekNumber = getWeekNumber(new Date());

// Select 4 random queries based on week number (more queries for better diversity)
const seed = weekNumber * 1000;
const shuffledQueries = [...searchQueries].sort(() => seededRandom(seed + Math.random() * 100) - 0.5);
const selectedQueries = shuffledQueries.slice(0, 4);

console.log('Week:', weekNumber, 'Selected queries:', selectedQueries);

// Fetch videos from selected queries
const allVideos = [];
for (const query of selectedQueries) {
const videos = await searchYouTube(query, 10);
allVideos.push(...videos);
}

// Remove duplicates and shuffle
const uniqueVideos = Array.from(new Map(allVideos.map(v => [v.id.videoId, v])).values());
const shuffledVideos = uniqueVideos.sort(() => seededRandom(seed + 500) - 0.5);

// Select EXACTLY 12 videos
const selectedVideos = shuffledVideos.slice(0, 12);

console.log(`Selected ${selectedVideos.length} videos for display`);

return selectedVideos.map(v => ({
videoId: v.id.videoId,
title: v.snippet.title
}));
}

function displayVideos(videos) {
document.getElementById('loading').style.display = 'none';
const container = document.getElementById('videos');
container.innerHTML = ''; // Clear existing

videos.forEach(video => {
const videoCard = document.createElement('div');
videoCard.className = 'video-card';
videoCard.innerHTML = `
<iframe
src="https://www.youtube.com/embed/${video.videoId}"
allowfullscreen>
</iframe>
<div class="video-info">
<p class="video-title">${video.title}</p>
</div>
`;
container.appendChild(videoCard);
});
}

async function loadVideos() {
try {
const currentWeek = getWeekNumber(new Date());

// Check if we have cached videos
if (CACHED_VIDEOS.length === 12) {
console.log('Using cached videos from GitHub Actions');
displayVideos(CACHED_VIDEOS);
} else {
// No cached videos or cache is incomplete - fetch new ones
console.log('No cached videos found, fetching from API...');
console.log('‚ö†Ô∏è WARNING: This uses API quota! GitHub Actions should populate the cache automatically.');

const newVideos = await fetchNewVideos();
displayVideos(newVideos);

// Log the new cache data that should be copied into the code
console.log('='.repeat(80));
console.log('üìã GITHUB ACTIONS WILL AUTO-UPDATE THIS:');
console.log('='.repeat(80));
console.log(`const CACHED_VIDEOS = ${JSON.stringify(newVideos, null, 2)};`);
console.log('');
console.log('Week number: ' + currentWeek);
console.log('='.repeat(80));
}

} catch (error) {
document.getElementById('loading').style.display = 'none';
document.getElementById('error').style.display = 'block';
document.getElementById('error').textContent = 'Error loading videos: ' + error.message;
console.error('Error:', error);
}
}

// Load videos when page loads
loadVideos();
</script>
</body>
</html>
